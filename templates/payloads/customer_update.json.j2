{
  "eventType": "CUSTOMER_UPDATE",
  "eventId": "{{ correlation_id }}",
  "timestamp": "{{ timestamp }}",
  "timestampMs": {{ timestamp_ms }},
  "source": {
    "system": "{{ source_system | default('velox') }}",
    "environment": "{{ environment }}",
    "etlName": "{{ etl_name }}"
  },
  "customer": {
    "customerId": "{{ customer_id | default(uuid4()) }}",
    "externalId": "{{ external_id | default('') }}",
    "updateType": "{{ update_type | default('FULL') }}"
  },
  "metadata": {
    "eventIndex": {{ event_index }},
    "totalEvents": {{ event_count }},
    "batchId": "{{ batch_id | default(uuid4()) }}",
    "version": "{{ version | default('1.0.0') }}"
  },
  "payload": {
    "action": "{{ action | default('UPDATE') }}",
    "fields": {{ fields | default({}) | to_json }},
    "options": {
      "validateAddress": {{ validate_address | default(true) | lower }},
      "sendNotification": {{ send_notification | default(false) | lower }},
      "auditLog": {{ audit_log | default(true) | lower }}
    }
  },
  "context": {
    "requestedBy": "{{ requested_by | default('system') }}",
    "reason": "{{ reason | default('data_sync') }}",
    "correlationId": "{{ correlation_id }}",
    "traceId": "{{ trace_id | default(uuid4()) }}"
  }
}

