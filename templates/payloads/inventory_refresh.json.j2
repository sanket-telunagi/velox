{
  "eventType": "INVENTORY_REFRESH",
  "eventId": "{{ correlation_id }}",
  "timestamp": "{{ timestamp }}",
  "timestampMs": {{ timestamp_ms }},
  "source": {
    "system": "{{ source_system | default('velox') }}",
    "environment": "{{ environment }}",
    "etlName": "{{ etl_name }}"
  },
  "inventory": {
    "warehouseId": "{{ warehouse_id | default('ALL') }}",
    "refreshType": "{{ refresh_type | default('DELTA') }}",
    "scope": "{{ scope | default('FULL') }}"
  },
  "metadata": {
    "eventIndex": {{ event_index }},
    "totalEvents": {{ event_count }},
    "batchId": "{{ batch_id | default(uuid4()) }}",
    "version": "{{ version | default('1.0.0') }}"
  },
  "payload": {
    "action": "{{ action | default('REFRESH') }}",
    "options": {
      "fullRefresh": {{ full_refresh | default(false) | lower }},
      "validateStock": {{ validate_stock | default(true) | lower }},
      "updatePricing": {{ update_pricing | default(false) | lower }},
      "syncReservations": {{ sync_reservations | default(true) | lower }}
    },
    "filters": {
      "skuList": {{ sku_list | default([]) | to_json }},
      "categoryIds": {{ category_ids | default([]) | to_json }},
      "locationIds": {{ location_ids | default([]) | to_json }},
      "modifiedSince": "{{ modified_since | default('') }}"
    }
  },
  "context": {
    "requestedBy": "{{ requested_by | default('system') }}",
    "reason": "{{ reason | default('scheduled_refresh') }}",
    "correlationId": "{{ correlation_id }}",
    "traceId": "{{ trace_id | default(uuid4()) }}",
    "priority": "{{ priority | default('normal') }}"
  }
}

